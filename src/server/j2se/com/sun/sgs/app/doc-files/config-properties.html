<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Project Darkstar Server Configuration Properties</title>
<link type="text/css" rel="stylesheet" href="config-properties.css">
</head>

<!--

  The properties listed in this file should appear in definition
  list <dl> elements.

  For each property, the name and information about the default should
  appear in a definition term (<dt>) element.  Properties that have a
  default should put the default value in a span element with class
  "default" (<span class="default">VALUE</span>).  Required properties
  should use a span element with class "required"
  (<span class="required"></span>), and properties with no default
  should use class "nodefault" (<span class="nodefault"></span>).

  For example:
  
  <dl>
  <dt>foo.property
  <span class="default">37</span>
  <dd>Controls how big foo is.
  </dl>

  Or:

  <dl>
  <dt>goo.property
  <span class="required"></span>
  <dd>Controls how big goo is.
  </dl>

  Since this file will be included in the public application
  documentation, make sure to not refer to classes that will not be
  documented there.

-->

<body>

<h1>Project Darkstar Server Configuration Properties</h1>

This page documents the configuration properties supported by the
current implementation of the Project Darkstar Server.  Configuration
properties may be specified by system properties
(using <code>-D</code><i>property</i><code>=</code><i>value</i>) or in
the application properties file named on the command line.

<p>
By default, the Project Darkstar Server consists of a single node, using 
the <a href="#GeneralProperties">General Properties</a>.
For increased scalibility and availability of the Project Darkstar Server,
multiple nodes can be configured to work together in a cluster.  This
multi-node configuration requires one special core server node to run
critical Project Darkstar operations, with the remaining nodes cooperating
to run the application.  
<p>
The core server node must be started before the application nodes.
<p>
Each application node must specify the location of the core server node using
the <a href="#com.sun.sgs.server.host"> com.sun.sgs.server.host</a> property.



<h2>Core Server Node Properties</h2>
These properties control the configuration of the Project Darkstar core
server node if a multi-node configuration is being used.

<dl>
    
<dt>com.sun.sgs.default.core.server
<span class="default">false</span>
<dd> If set to <code>true</code>, start the non-application node which
 runs critical Project Darkstar Server operations. 
</dl>

The core server node's configuration must also include the 
<a href="#com.sun.sgs.app.name">com.sun.sgs.app.name</a> and
<a href="#app.root">com.sun.sgs.app.root</a> properties.  Additionally,
it can specify ports to be used on the core server machine.

<dl>
<dt>com.sun.sgs.impl.service.data.store.net.server.port
<span class="default">44530</span>
<dd>The network port for the core data service server.  
<dt>com.sun.sgs.impl.service.watchdog.server.port
<span class="default">44533</span>
<dd>The network port for the core watchdog service server.
<dt>com.sun.sgs.impl.service.nodemap.server.port
<span class="default">44535</span>
<dd>The network port for the core node mapping service server.
</dl>

<a name="GeneralProperties"></a>
<h2>General Properties</h2>

These properties control various general facilities in the Project Darkstar
Server.

<dl>

<dt><a name="com.sun.sgs.app.name">com.sun.sgs.app.name</a>
<span class="required"></span>
<dd>The name of the application.

<dt><a name="app.root">com.sun.sgs.app.root</a>
<span class="required"></span>
<dd>The root directory for the application.

<dt><a name="app.listener">com.sun.sgs.app.listener</a>
<span class="required"></span>
<dd>The <a href="../AppListener.html"><code>AppListener</code></a> for
  the application, specified as a fully qualified class name.

<dt><a name="com.sun.sgs.app.port">com.sun.sgs.app.port</a>
<span class="required"></span>
<dd>The TCP port on which to listen for client connections.

<dt><a name="com.sun.sgs.server.host">com.sun.sgs.server.host</a>
<span class="required"></span>
<dd> The name of the host the core Project Darkstar Server node is running on.

<dt><a name="com.sun.sgs.txn.timeout">com.sun.sgs.txn.timeout</a>
<span class="default">100</span>
<dd>The maximum amount of time in milliseconds that a transaction will
  be permitted to run before it is a candidate for being aborted.

<dt>com.sun.sgs.txn.timeout.unbounded
<span class="default">Long.MAX_VALUE</span>
<dd>The maximum amount of time in milliseconds that an <q>unbounded</q>
  transaction will be permitted to run before it is a candidate for
  being aborted.

</dl>

<a name="DataService"></a>
<h2>DataService Properties</h2>

These properties control the implementation of the
<code>DataService</code>.

<dl>

<dt>
<a name="com.sun.sgs.impl.service.data.DataServiceImpl.detect.modifications">
  com.sun.sgs.impl.service.data.DataServiceImpl.detect.modifications</a>
<span class="default">true</span>
<dd>Whether to automatically detect modifications to managed objects.
  If set to something other than <code>true</code>, then applications
  need to call <a
  href="../DataManager.html#markForUpdate(com.sun.sgs.app.ManagedObject)">
  <code>DataManager.markForUpdate</code></a> or
  <a href="../ManagedReference.html#getForUpdate(java.lang.Class)">
  <code>ManagedReference.getForUpdate</code></a> for any modified
  objects to make sure that the modifications are recorded by
  the <code>DataService</code>.

</dl>

<a name="DataStore"></a>
<h3>DataStore Properties</h3>

These properties are the subset of the properties supported by
the <code>DataService</code> that control the implementation of the
underlying <code>DataStore</code>.

<dl>

<dt>com.sun.sgs.impl.service.data.store.DataStoreImpl.directory
<span class="default"><i>${com.sun.sgs.app.root}</i>/dsdb</span>
<dd>The directory in which to store database files.  Each instance of
  requires its own, unique directory.

</dl>

<a name="Bdb"></a>
<h3>Berkeley DB Properties</h3>

These properties are the subset of the properties supported by
the <code>DataService</code> that control the implementation of the
underlying Berkeley DB database.

<dl>

<dt>com.sun.sgs.impl.service.data.store.db.bdb.cache.size
<span class="default">1000000</span>
<dd>The size in bytes of the Berkeley DB cache.  The value must not be
  less than <code>20000</code>.

<dt>com.sun.sgs.impl.service.data.store.db.bdb.checkpoint.interval
<span class="default">60000</span>
<dd>The interval in milliseconds between checkpoint operations that
  flush changes from the database log to the database.

<dt>com.sun.sgs.impl.service.data.store.db.bdb.checkpoint.size
<span class="default">100000</span>
<dd>The number of bytes that needs to have been written since the last
  checkpoint operation was performed to require another checkpoint.

<dt>com.sun.sgs.impl.service.data.store.db.bdb.flush.to.disk
<span class="default">false</span>
<dd>Whether to flush changes to disk when a transaction commits.  If
  <code>false</code>, the modifications made in some of the most recent
  transactions may be lost if the host crashes, although data integrity
  will be maintained.  Flushing changes to disk avoids data loss but
  introduces a significant reduction in performance.

<dt>com.sun.sgs.impl.service.data.store.db.bdb.lock.timeout
<span class="default" style="font-family: serif"><code>0.1</code> times
  the value of the <code>com.sun.sgs.txn.timeout</code> property, if
  specified, otherwise <code>10</code></span>
<dd>The maximum amount of time in milliseconds that an attempt to obtain
  a lock will be allowed to continue before being aborted.  The value
  must be greater than <code>0</code>, and should be less than the
  transaction timeout.

<dt>com.sun.sgs.impl.service.data.store.db.bdb.remove.logs
<span class="default">false</span>
<dd>Whether to automatically remove database log files that are no
  longer needed.  Note that automatic log file removal is likely to make
  catastrophic recovery of the database impossible, because log files
  that may be needed will not have been backed up.

</dl>

<a name="Kernel"></a>
<h2>Kernel Properties</h2>

These properties control the implementation of the <code>Kernel</code>,
which is the part of the system that manages applications and the
components that make up the system.

<dl>

<dt>com.sun.sgs.impl.kernel.Kernel.profile.level
<span class="default">off</span>
<dd>Whether to perform profiling.  Profiling is enabled if the value is
  <code>on</code>.

</dl>

<a name="TaskScheduler"></a>
<h3>TaskScheduler Properties</h3>

These properties control the implementation of
the <code>TaskScheduler</code>, which is the part of
the <code>Kernel</code> that schedules tasks.

<dl>
<dt>com.sun.sgs.impl.kernel.TransactionConsumerThreads
<span class="default">4</span>
<dd>The number of initial consumer threads used to process 
<a href="../TaskManager.html"><code>TaskManager</code></a> tasks.
More threads will be created and used if necessary.

<dt>com.sun.sgs.impl.kernel.TaskConsumerThreads
<span class="default">4</span>
<dd>The number of threads used to process Project Darkstar Server tasks.

</dl>

<hr>
<font size="-1">
  Copyright &copy; 2007 Sun Microsystems, Inc. All rights reserved
</font>

</body>
</html>
