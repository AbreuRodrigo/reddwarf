<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Darkstar JME Server Readme</title>
</head>
<body>
<h1>Darkstar JME Server README</h1>
<h2>Introduction</h2>
The Darkstar JME Server code provides support for mobile clients to
talk to the Darkstar server. It adds an http user manager to Darkstar.
It uses Jetty 5 an open source Servlet container to provide the http
listener. <br>
<br>
<h2>Building the code</h2>
The code was developed using Netbeans, the provided build.xml should
work without Netbeans. The only changes needed are to change location
of the libraries that are needed. All the needed Jetty libraries are
provided in the lib directory<br>
<br>
<h2>XML Changes</h2>
A number of parameters were added to the deployment XML.<br>
<ul>
  <li>&lt;PARAMETER tag="gameName" value="ChatTest" /&gt; This
parameter is mandatory and is used by the servlet to decide which
UserManager to send the request to<br>
  </li>
  <li>&lt;PARAMETER tag="session_timeout" value="360" /&gt; This is
optional, the default timeout is 300 ms (5 minutes)<br>
  </li>
</ul>
A sample deployment XML is provided<br>
<h2>Request Flow<br>
</h2>
A request flows through the system as follows:<br>
<br>
<ol>
  <li>There is a servlet which receives all requests. Every request has
attached to it the game name. <br>
  </li>
  <li>Based on the game name the servlet refers the request to the
correct UserManager</li>
  <li>The UserManager tries to retrieve the user from the session, if
there is no user a user is created</li>
  <li>the received packets are sent to the users batch processor.</li>
  <li>The batch processor extracts all the packets received from the
client and calls packetReceived on the user 1 by 1</li>
  <li>the batch processor is the transmitter as well. Any data flowing
back to the client ends up at the batch&nbsp; processor and is put on a
queue</li>
  <li>After the request is processed the Usermanager returns the users
queue to the servlet. <br>
  </li>
  <li>The servlet reads all the packets from the queue and sends them
back to the client<br>
  </li>
</ol>
<br>
</body>
</html>
